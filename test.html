<html>
<head>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>
<h2>Stinky Pinky</h2>
Clue1: <div id=clue-1></div>

Clue2: <div id=clue-2></div>
<br>
Answer: <div id=answer-1></div><div id=answer-2></div>
<script type="text/javascript">

function request_word(source_word, word_type, success_callback) {
    // see datamuse api for valid word_type, for example rel_spc
    $.ajax({
      type: "GET",
      url: 'http://api.datamuse.com/words?'+ word_type + '=' + source_word,
      dataType: "json",
      cache: false,
      crossDomain: true,
      processData: true,
      success: success_callback
    });
}
function set_clue(clue, data) {
  var str = '';
  for (var i =0; i < data.length;i++){
    str += data[i]['word'] + ' ';
  }
  clue.append(str);
  console.log(str);
}

function get_clues(ans1, ans2) {
 request_word(ans1, 'rel_spc', function(data){set_clue($('#clue-1'), data)});
 request_word(ans2, 'rel_spc', function(data){set_clue($('#clue-2'), data)});
}

words = ['time','year','people','way','day','man','thing','woman','life',
   'child','world','school','state','family','student','group',
   'country','problem','hand','part','place','case','week',
   'company','system','program','question','work','government',
   'number','night','point','home','water','room','mother','area',
   'money','story','fact','month','lot','right','study','book','eye',
   'job','word','business','issue','side','kind','head','house',
   'service','friend','father','power','hour','game','line','end',
   'member','law','car','city','community','name','president','team',
   'minute','idea','kid','body','information','back','parent','face',
   'others','level','office','door','health','person','art','war',
   'history','party','result','change','morning','reason','research',
   'girl','guy','moment','air','teacher','force','education'];

  $(document).ready(function() {
    var ans1 = words[Math.floor(Math.random()*words.length)];
    console.log(ans1);
    $('#answer-1').append(ans1);
    request_word(ans1, 'rel_rhy', function(data) {
        ans2 = data[0]['word'];
        $('#answer-2').append(ans2);
        console.log(ans2);
        get_clues(ans1, ans2);
    });
  });
</script>
</body>
</html>
